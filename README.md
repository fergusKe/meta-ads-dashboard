# Meta 廣告智能分析儀表板

> 🤖 AI 驅動的 Meta 廣告數據分析與優化平台
>
> 版本：3.0 | Python 3.10+ | Streamlit | OpenAI GPT-4o-mini

---

## 🚀 快速開始

### 1. 啟動應用程式
```bash
cd meta-ads-dashboard
uv run streamlit run app.py
```

訪問 **http://localhost:8502** 開始使用

### 2. 設定 OpenAI API Key
先複製環境範本並填入設定：
```bash
cp .env.example .env
```

在 `.env` 檔案中設定：
```
OPENAI_API_KEY=your-key-here
```

可選進階設定（未指定時將使用預設值）：
```
# 指定要呼叫的 OpenAI 模型
OPENAI_MODEL=gpt-4o-mini

# LLM 回應快取秒數（降低成本與延遲）
CACHE_TTL=3600
```

功能開關（可依部署需求隱藏對應頁面）：
- `ENABLE_AI_COPYWRITING=true`：顯示「✍️ AI 文案生成」功能
- `ENABLE_AI_IMAGE_GENERATION=true`：顯示「🤖 AI 素材製作首頁」「🎨 AI 圖片生成」「🧠 智能素材優化」
- `ENABLE_PERFORMANCE_PREDICTION=true`：顯示「⚡ 即時優化建議」「🎯 智能投放策略」

> 圖片生成：若已設定 `GEMINI_API_KEY`（可再透過 `GEMINI_IMAGE_MODEL` 指定模型，預設為 `gemini-2.5-flash-image`），系統會優先使用 Gemini nano-banana；未設定或生成失敗時會自動退回 OpenAI DALL·E 3。

常見錯誤排查：
- `⚠️ 尚未設定 OPENAI_API_KEY` → 請在 `.env` 中填入有效金鑰
- `❌ API 金鑰無效或未授權` → 檢查金鑰是否正確或已過期
- `⚠️ API 配額不足` → 至 OpenAI 後台確認帳戶用量或升級方案
- `⚠️ 無法連線至 OpenAI` → 稍後重試或檢查網路連線

### 3. 建立 RAG 知識庫（必須）
1. 前往「🧠 RAG 知識庫管理」頁面
2. 點擊「建立知識庫」
3. 等待完成（約 1-2 分鐘）

---

## ✨ 功能亮點

### 🤖 12 個 AI 核心功能

| 功能 | 說明 | AI 能力 |
|------|------|---------|
| **即時優化建議** ⭐⭐⭐ | 緊急問題、高效廣告、預算優化 | 根因分析、風險評估 |
| **素材成效分析** | Headline、CTA、文案分析 | AI 深度洞察、A/B 提案 |
| **廣告品質評分** | 品質排名、低分預警 | AI 改善計畫（緊急/中期/長期） |
| **轉換漏斗優化** | 8 階段漏斗分析 | AI 瓶頸診斷與優化 |
| **自動化報告** ⭐⭐ | 週報/月報生成 | AI 6 大部分報告 |
| **A/B 測試設計** | 測試方案設計 | RAG 增強、樣本計算 |
| **受眾擴展建議** | 新受眾推薦 | RAG 歷史案例參考 |
| **競爭對手分析** 🆕 | 競品分析 | 差異化策略、市場洞察 |
| **多變量測試** 🆕 | MVT 優化 | 因子分析、最佳組合預測 |
| **智能 Agent 巡檢** | 每日自動檢查 | 異常偵測、機會識別 |
| **對話式助手** | 自然語言查詢 | RAG 增強回答 |
| **AI 素材工具** | 文案/圖片生成 | Gemini nano-banana／DALL-E 3、GPT-4o-mini |

### 📊 24 個分析頁面

**數據儀表板**：整體效能、活動分析、受眾洞察、ROI 分析、趨勢分析

**深度分析**：素材成效、品質評分、轉換漏斗、詳細數據表格

**AI 優化**：即時建議、受眾擴展、A/B 測試、MVT 優化

**AI 素材**：素材首頁、文案生成、圖片生成、智能優化

**自動化**：報告生成、Agent 巡檢、對話助手、競品分析

**系統**：RAG 知識庫、投放策略

---

## 📚 文件導覽

### 📖 用戶文件
- **[用戶使用指南.md](用戶使用指南.md)** ⭐ - 完整使用說明（新手必讀）
- **[AI功能使用指南.md](AI功能使用指南.md)** - AI 功能詳細說明
- **[廣告投手高效工作流程.md](廣告投手高效工作流程.md)** - 工作流程範例

### 🔧 開發文件
- **[開發文件.md](開發文件.md)** - 技術架構、API 說明
- **[廣告顯示組件使用說明.md](廣告顯示組件使用說明.md)** - 組件文件

---

## 🎯 使用流程

### 新手入門（3 步驟）

**第 1 步：了解數據（10 分鐘）**
1. 整體效能儀表板 - 查看整體 ROAS、花費
2. 活動分析 - 找出好/壞活動
3. 素材成效分析 - 看哪些素材有效

**第 2 步：AI 優化建議（20 分鐘）**
4. 即時優化建議 - 獲得緊急問題、預算優化建議
5. 廣告品質評分 - AI 生成改善計畫
6. 自動化報告 - 生成週報

**第 3 步：執行優化（持續）**
7. A/B 測試設計 - 科學化測試
8. 受眾擴展 - 找新受眾
9. 競爭對手分析 - 差異化策略

### 典型工作流程

**每日（15 分鐘）**
- 整體效能儀表板
- 智能 Agent 巡檢
- 即時優化建議

**每週（1 小時）**
- 活動分析
- 素材成效 + AI 洞察
- 品質評分 + AI 改善
- 自動化週報

**每月（2-3 小時）**
- ROI 分析
- 競爭對手分析
- 受眾擴展
- A/B 測試設計

---

## 🔧 技術架構

### 核心技術
- **前端**：Streamlit
- **數據處理**：Pandas、NumPy
- **視覺化**：Plotly
- **AI 模型**：Gemini nano-banana（優先）、OpenAI DALL-E 3（備援）、GPT-4o-mini
- **RAG**：LangChain + ChromaDB
- **Agent**：Pydantic AI

### 成本控制
- **快取機制**：1 小時 TTL，節省 40-60% 成本
- **預估月成本**：$15-25（正常使用）
- **成本監控**：實時追蹤 Token 使用量

---

## 📊 數據要求

### Excel 檔案格式
- 檔案位置：`data/【小圭】Meta廣告數據_20240101-20241031 (2).xlsx`
- 必要欄位：行銷活動名稱、廣告組合名稱、花費金額、ROAS、CTR 等

---

## ❓ 常見問題

### Q：首次使用需要做什麼？
A：
1. 設定 OpenAI API Key（.env）
2. 建立 RAG 知識庫（RAG 知識庫管理頁面）
3. 閱讀用戶使用指南

### Q：AI 功能沒反應？
A：檢查 `.env` 是否設定 `OPENAI_API_KEY`

### Q：頁面太多，從哪開始？
A：按照「新手入門流程」：
1. 整體效能儀表板
2. 即時優化建議
3. 自動化報告

### Q：RAG 知識庫是什麼？
A：從高效廣告（ROAS >= 3.0）建立的知識庫，讓 AI 能參考歷史成功案例提供更準確的建議。

---

## 📞 需要幫助？

- 📖 **用戶使用指南**：[用戶使用指南.md](用戶使用指南.md)
- 🤖 **AI 功能說明**：[AI功能使用指南.md](AI功能使用指南.md)
- 📋 **工作流程**：[廣告投手高效工作流程.md](廣告投手高效工作流程.md)
- 🔧 **技術文件**：[開發文件.md](開發文件.md)

---

**開始使用**：http://localhost:8502
