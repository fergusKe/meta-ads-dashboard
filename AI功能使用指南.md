# 🤖 AI 功能使用指南

> **更新日期**：2025-10-03
> **版本**：v1.0

---

## 📋 目前已實作的 AI 功能

### ✅ 1. 即時優化建議 - AI 深度根因分析

**位置**：⚡ 即時優化建議 → 🚨 緊急建議 → 🤖 AI 深度根因分析

**功能**：針對單一問題廣告進行深度分析，提供專屬優化建議

**改進重點**：
- ✅ **針對性分析**：不再混合分析所有廣告，而是讓使用者選擇特定廣告
- ✅ **詳細數據**：包含受眾、素材、品質評分等完整資訊
- ✅ **對比分析**：與高表現廣告對比，找出關鍵差異
- ✅ **可執行建議**：每個建議都有具體步驟、預期效果、執行時間

---

## 🚀 使用方式

### 步驟 1：設定 API Key

選擇以下任一方式設定 OpenAI API Key：

#### 方法 A：環境變數（推薦）
```bash
export OPENAI_API_KEY='sk-your-api-key-here'
```

#### 方法 B：建立 .env 檔案
在專案根目錄建立 `.env` 檔案：
```env
OPENAI_API_KEY=sk-your-api-key-here
```

#### 方法 C：Streamlit Secrets
建立 `.streamlit/secrets.toml`：
```toml
OPENAI_API_KEY = "sk-your-api-key-here"
```

**取得 API Key**：https://platform.openai.com/api-keys

---

### 步驟 2：重啟 Streamlit

如果 Streamlit 正在運行，需要重啟以載入環境變數：

```bash
# 停止現有服務（Ctrl+C）

# 重新啟動
cd meta-ads-dashboard
uv run streamlit run app.py
```

---

### 步驟 3：使用 AI 分析功能

1. **開啟「⚡ 即時優化建議」頁面**

2. **點擊「🚨 緊急建議」標籤**

3. **查看問題活動清單**
   - 如果有問題活動，會顯示詳細列表

4. **捲動到「🤖 AI 深度根因分析」區塊**

5. **選擇要分析的廣告**
   - 從下拉選單選擇特定廣告活動
   - 建議選擇最重要或花費最高的問題廣告

6. **點擊「🔍 開始 AI 分析」按鈕**
   - AI 會花費 5-15 秒進行分析

7. **查看分析報告**
   - 📊 根因診斷
   - 💡 優化方案（3-5 個具體建議）
   - ⚠️ 風險提示
   - ⚡ 快速勝利
   - 📈 預期改善路徑

8. **下載報告**（可選）
   - 點擊「📥 下載分析報告」
   - 與團隊分享討論

---

## 📊 AI 分析報告內容

### 1. 🔍 根因診斷

AI 會分析：
- ✅ 與高表現廣告的關鍵差異
- ✅ 受眾定位是否精準
- ✅ 素材是否吸引人
- ✅ 品質評分狀況
- ✅ 轉換漏斗哪個環節出問題

**範例輸出**：
```
根因診斷：

該廣告 ROAS 1.85，低於目標 3.0，主要問題在於：

1. 受眾過於廣泛（25-65 歲，興趣未精準定位）
   → 導致觸及人數高但轉換率低

2. 素材疲勞（CTR 2.1% 低於高表現廣告的 3.5%）
   → 標題和圖片缺乏吸引力

3. 品質排名「平均以下」
   → Meta 演算法降低曝光優先級
```

---

### 2. 💡 優化方案

每個建議包含：
- 🎯 優化項目
- 📋 具體步驟（3-5 步）
- 📊 預期效果
- ⏱️ 執行時間
- 🚦 優先級

**範例輸出**：
```
優化方案 1：縮小受眾範圍 🔴 高優先級

🎯 優化項目：精準定位目標受眾

📋 具體步驟：
1. 將年齡範圍縮小為 25-45 歲（核心購買族群）
2. 新增興趣標籤：健康飲食、有機食品、養生
3. 排除已購買客戶（避免重複曝光）
4. 建立類似受眾（Lookalike，基於現有客戶）

📊 預期效果：
- ROAS 預期提升 30-40%（從 1.85 → 2.4-2.6）
- CPA 預期降低 25%

⏱️ 執行時間：1-2 小時

🚦 優先級：🔴 高（立即執行）
```

---

### 3. ⚠️ 風險提示

AI 會指出執行優化時需要注意的風險。

**範例輸出**：
```
風險提示：

1. 縮小受眾後，觸及人數會下降
   → 建議同步提高競價 10-15% 以維持曝光

2. 更換素材需要 3-5 天累積數據
   → 不要過早判斷成敗，至少觀察 5 天

3. 品質評分改善需要時間
   → 預期 1-2 週後才會明顯提升
```

---

### 4. ⚡ 快速勝利

找出 1 個**今天就能執行且效果明顯**的優化動作。

**範例輸出**：
```
快速勝利：立即更新廣告標題

當前標題：「台灣茶葉」（過於平淡）

建議標題：「🍵 百年工藝 | 有機烏龍茶限時 85 折」

原因：
- 加入 emoji 提升視覺吸引力
- 強調「百年工藝」建立信任
- 「限時 85 折」創造緊迫感

預期效果：CTR 提升 15-20%（今天就能看到）

執行時間：5 分鐘
```

---

### 5. 📈 預期改善路徑

列出階段性目標。

**範例輸出**：
```
預期改善路徑：

第 1-3 天（執行快速勝利）
- 更新標題和圖片
- CTR 預期提升至 2.5%
- ROAS 小幅提升至 2.0

第 4-7 天（執行受眾優化）
- 縮小受眾範圍
- 調整競價
- ROAS 預期提升至 2.4

第 8-14 天（持續優化）
- 品質評分逐步改善
- Meta 演算法開始提升優先級
- ROAS 穩定在 2.6-3.0

第 15 天後（達標）
- ROAS 達到目標 3.0
- 考慮擴大預算
```

---

## 💰 成本估算

### 每次分析成本

| 模型 | Token 數 | 單價 | 成本 |
|------|---------|------|------|
| GPT-3.5 Turbo | ~2,500 tokens | $0.002/1K tokens | **$0.005** |
| GPT-4 | ~2,500 tokens | $0.06/1K tokens | **$0.15** |

**目前使用**：GPT-3.5 Turbo（每次分析約 $0.005，約 NT$0.15）

**每月成本估算**：
- 每天分析 5 個廣告 = $0.025/天
- 每月 = $0.75（約 NT$23）

---

## 🎯 使用建議

### 何時使用 AI 分析？

✅ **適合場景**：
1. **問題廣告診斷**：ROAS 低於目標時
2. **新廣告優化**：上線 3-5 天表現不佳
3. **定期健檢**：每週分析 Top 3 問題廣告
4. **重大調整前**：大幅增減預算前先分析

❌ **不適合場景**：
1. **表現良好的廣告**：ROAS 已達標，不需浪費 API 成本
2. **數據太少**：廣告運行少於 3 天，數據不足
3. **緊急暫停**：嚴重虧損（ROAS < 0.5）直接暫停即可

---

### 最佳實踐

1. **選擇分析對象**
   - 優先分析花費高但 ROAS 低的廣告
   - 一次專注 1-2 個廣告，不要貪多

2. **執行建議**
   - 從「快速勝利」開始執行（效果明顯）
   - 優先執行 🔴 高優先級建議
   - 記錄執行前後數據變化

3. **追蹤成效**
   - 執行優化後，觀察 3-5 天
   - 如果有效，繼續執行其他建議
   - 如果無效，回頭檢視是否執行到位

4. **建立知識庫**
   - 下載每次分析報告
   - 記錄哪些建議有效、哪些無效
   - 未來遇到類似問題可快速參考

---

## ❓ 常見問題

### Q1：AI 分析需要多久？
**A**：通常 5-15 秒，取決於 OpenAI API 的回應速度。

### Q2：分析結果準確嗎？
**A**：AI 基於數據和最佳實踐提供建議，但仍需人工判斷。建議：
- 優先執行「快速勝利」測試效果
- 結合自己的產業經驗
- 不要盲目執行所有建議

### Q3：API Key 安全嗎？
**A**：API Key 只存在本地環境變數或 .env 檔案，不會上傳到任何地方。但請注意：
- 不要將 .env 檔案加入 Git
- 不要分享你的 API Key
- 定期檢查 OpenAI 使用量

### Q4：可以分析高表現廣告嗎？
**A**：可以，但目前功能設計是針對問題廣告。如果想分析高表現廣告「為什麼好」，需要另外開發功能。

### Q5：分析結果可以自動執行嗎？
**A**：目前需要人工執行建議。未來可以開發 Agent 自動執行簡單優化（如更新標題），但重大調整（如受眾、預算）還是建議人工確認。

### Q6：成本會失控嗎？
**A**：不會，因為：
- 每次分析成本很低（$0.005）
- 需要手動點擊按鈕才會調用 API
- 有快取機制（相同分析會使用快取）

如果擔心成本，可以：
- 在 OpenAI 帳戶設定每月限額
- 只在必要時使用 AI 分析

---

## 🔄 下一步開發

### 計畫中的 AI 功能

1. **轉換漏斗 AI 分析**（下一個任務）
   - 找出漏斗瓶頸
   - A/B 測試建議

2. **素材成效 AI 洞察**
   - 分析成功素材模式
   - 生成新文案建議

3. **廣告品質 AI 改善計畫**
   - 針對低品質廣告提供改善方案

4. **RAG 增強**（中期）
   - 從歷史數據學習
   - 「上次也遇到類似問題，當時這樣解決的」

5. **自主優化 Agent**（長期）
   - 每天自動檢查
   - 自動發現問題 + 通知

---

## 📞 支援

**遇到問題？**
1. 檢查 API Key 是否正確設定
2. 檢查 OpenAI 帳戶餘額
3. 查看終端機錯誤訊息
4. 參考本文件「常見問題」

**功能建議？**
- 記錄在專案 Issue
- 說明使用場景和預期效果

---

**版本記錄**：
- v1.0（2025-10-03）：首次發布，支援即時優化建議 AI 分析
