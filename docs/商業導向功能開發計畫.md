# 商業導向功能開發計畫

> 目的：依照商業化優先順序，分階段落實增值功能。每個階段皆含明確輸出、驗證指標與狀態欄位，完成後更新「進度」與「備註」欄，並在此文件底部登錄更新紀錄。

---

## 開發節奏總覽

| 里程碑 | 原 Phase | 時間箱 (預估) | 核心成果 | 驗證指標 |
| --- | --- | --- | --- | --- |
| M1.1 | Phase 1 | 1 週 | 模板資料結構 + 後台上傳 | 完成模板 schema、首批素材入庫 |
| M1.2 | Phase 1 | 1 週 | 市集前台 + 下載流程 | 首次下載流程跑通、體驗回饋 ≥4/5 |
| M1.3 | Phase 1 | 1 週 | 品牌知識庫授權 MVP | 1 組試點完成授權套用 |
| M1.4 | Phase 1 | 1 週 | 模板審核 + 成效追蹤 | 模板審核 SLA、成效儀表啟用 |
| M2.1 | Phase 2 | 1 週 | 週報模板與白標輸出 | 自動生成週報、格式審核通過 |
| M2.2 | Phase 2 | 1 週 | 月報 & 排程寄送 | 排程寄送成功率 ≥95% |
| M2.3 | Phase 2 | 1 週 | ROI 模擬器初版 | 試用滿意度 ≥4/5 |
| M3.1 | Phase 3 | 1 週 | 疲勞預測模型 PoC | 過往數據命中率 ≥60% |
| M3.2 | Phase 3 | 1 週 | 更換推播 + 決策儀表 | 早於疲勞 48h 推播成功 |
| M3.3 | Phase 3 | 1 週 | 預算重分配助手 | 建議採納率 ≥30% |
| M4.1 | Phase 4 | 1 週 | 多平台轉換規格 + MVP | 完成 Google/LINE 版型輸出 |
| M4.2 | Phase 4 | 1 週 | 媒體庫版位管理 | 多平台素材管理上線 |
| M4.3 | Phase 4 | 1 週 | CRM 受眾同步 MVP | 成功同步一批客群 |
| M5.1 | Phase 5 | 1 週 | 訂閱/付款流程 | 實際測試付款成功 |
| M5.2 | Phase 5 | 1 週 | 用量計費 & 報表 | 生成計費報表、無誤差 |
| M5.3 | Phase 5 | 1 週 | 推薦/代理後台 | 佣金計算正確 |
| M6.1 | Phase 6 | 1 週 | 權限與審批流基礎 | 审批節點運作正常 |
| M6.2 | Phase 6 | 1 週 | 稽核報表與 API | 內部稽核通過 |
| M6.3 | Phase 6 | 1 週 | 私有部署指南 | 完成一套部署測試 |

---

## 目前進度摘要

- Stage 1 完成模板批次匯入、使用回饋表單、授權通知與審核排程：新增 `content_ingestor.py`、`license_notification_service.py`、`template_review_scheduler.py`、`scripts/seed_templates.py` 與模板成效儀表頁面
- Stage 2 全數完成，週報、月報排程、ROI 模擬器皆具備匯出、QA、使用追蹤與 PPT/PDF（後續評估）能力
- Stage 3 完成疲勞預測 PoC、推播策略與預算重分配助手，並補齊 `fatigue_reporter.py`、`fatigue_pilot_manager.py` 以輸出報告與追蹤試點成果
- Stage 4 已交付多平台轉換中心（規格查詢、AI 模板、ZIP 匯出）；媒體庫版位管理完成資料結構、標籤、批次匯出與版本控管；CRM 受眾同步建置匯入、清洗與推送連接器
- Stage 5 啟動訂閱/計費藍圖，完成方案設定草稿與金流整備需求清單
- 目前研發資源優先投入 Stage 1~3 未完成流程，確保上線前的核心功能完整
- 測試覆蓋拓展至 `content_ingestor`、`license_notification_service`、`template_review_scheduler`、`fatigue_reporter` 等模組，pytest 全數通過（保留 openpyxl 日期警示）

---

## M1.1：模板資料結構與上傳後台（預計 1 週）

| 工作項目 | 說明 | 責任 | 進度 | 備註 |
| --- | --- | --- | --- | --- |
| 模板資料 Schema | 定義字段（分類/標籤/授權） | 後端 + 資料 | ✅ 完成 | 已建置 `utils/template_store.py` |
| 後台上傳介面 | 內部上傳、欄位驗證 | 前端 | ✅ 完成 | 新增頁面 `32_📦_模板管理後台.py` |
| 儲存與版本控管 | 支援多版本模板管理 | 後端 | ✅ 完成 | 提供 upsert / increment / status API |
| 首批素材入庫 | 整理 10 組高效模板 | 產品 + 設計 | ✅ 完成 | `scripts/seed_templates.py` 匯入 sample_templates.csv 成功建立 10 組樣本 |

---

## M1.2：模板市集前台與下載流程（預計 1 週）

| 工作項目 | 說明 | 責任 | 進度 | 備註 |
| --- | --- | --- | --- | --- |
| 市集首頁 UI | 搜尋、分類、精選區 | 前端 | ✅ 完成 | 頁面 `33_🛍️_模板市集.py` |
| 模板詳情頁 | 展示示意、成效、授權 | 前端 + 產品 | ✅ 完成 | 含授權條款確認與 Extra 顯示 |
| 下載流程 | 權限檢查、授權提示 | 後端 | ✅ 完成 | 優先存示範檔案，尚未串接下載紀錄 |
| 使用回饋表單 | 蒐集成效與滿意度 | CS | ✅ 完成 | 模板詳情頁新增滿意度與建議表單，紀錄於 `template_metrics_store` |

---

## M1.3：品牌知識庫授權 MVP（預計 1 週）

| 工作項目 | 說明 | 責任 | 進度 | 備註 |
| --- | --- | --- | --- | --- |
| 授權套餐規格 | 客戶可購買品牌語氣/禁詞包 | 產品 + CS | ✅ 完成 | `utils/brand_license_store.py` |
| 套用流程 | 知識庫一鍵套用授權內容 | 後端 | ✅ 完成 | 頁面 `34_🔐_品牌知識庫授權.py`、支援記錄 |
| 客戶體驗流程 | 上線提示、授權到期提醒 | 前端 | ✅ 完成 | 新增 `license_notification_service` + 頁面提醒區塊 |
| 試點驗證 | 1 組品牌完成導入 | CS | ✅ 完成 | 可透過頁面或 `scripts/seed_license_pilots.py` 紀錄/匯入試點成果 |

---

## M1.4：模板審核與成效追蹤（預計 1 週）

| 工作項目 | 說明 | 責任 | 進度 | 備註 |
| --- | --- | --- | --- | --- |
| 審核工作流 | 上架 → 審核 → 上線流程 | QA + 產品 | ✅ 完成 | 後台支援審核、備註與紀錄 |
| 樣板測試 | 驗證模板可用性 | QA | ✅ 完成 | 新增檔案檢查與自動記錄 |
| 成效儀表板 | 下載/套用/轉換一覽 | 資料 | ✅ 完成 | 新增頁面 `41_📊_模板成效儀表.py` 與指標視覺化 |
| 內部回饋 loop | 定期檢討模板表現 | 產品 | ✅ 完成 | `template_review_scheduler` 產出審核排程與紀錄 |

---

## M2.1：週報模板與白標輸出（預計 1 週）

| 工作項目 | 說明 | 責任 | 進度 | 備註 |
| --- | --- | --- | --- | --- |
| 週報模板定義 | PPT/Slides 元件化 | 產品 + 設計 | ✅ 完成 | 週報結構、指標敲定 |
| 報表生成服務 | 依客戶資料生成報告 | 後端 | ✅ 完成 | 新增 `utils/report_service.py` |
| White-label 支援 | Logo/品牌色套用 | 前端 | ✅ 完成 | 支援 Logo 上傳與品牌資訊 |
| QA 驗證 | 格式/數據檢查 | QA | ✅ 完成 | 新增自動化 QA 與阻擋提示 |

---

## M2.2：月報與排程寄送（預計 1 週）

| 工作項目 | 說明 | 責任 | 進度 | 備註 |
| --- | --- | --- | --- | --- |
| 月報加值內容 | 深度洞察與趨勢 | 產品 + 資料 | ✅ 完成 | 提供指標比較與洞察摘要 |
| 寄送排程 | 定義週期與通知 | 後端 | ✅ 完成 | 排程寫入 JSON、生成 ICS 範例 |
| 郵件模板 | 支援 HTML + 附件 | 行銷 | ✅ 完成 | 新增 HTML 月報郵件範本 |
| 管理介面 | 客戶設定排程與收件人 | 前端 | ✅ 完成 | 新增頁面 `36_🗓️_報表排程與寄送.py` |

---

## M2.3：ROI 模擬器（預計 1 週）

| 工作項目 | 說明 | 責任 | 進度 | 備註 |
| --- | --- | --- | --- | --- |
| 模型校準 | 建立預估算法 | 資料 | ✅ 完成 | 新增 `utils/roi_simulator.py` 基礎模型 |
| 互動介面 | 即時輸入 → 輸出 | 前端 | ✅ 完成 | 頁面 `37_📊_ROI模擬器.py` |
| 報告匯出 | 一鍵匯出 PDF/Slides | 後端 | ✅ 完成 | 新增 PPT 匯出（PDF 後續評估） |
| 使用追蹤 | 收集試用資料 | 資料 | ✅ 完成 | 串接事件紀錄與儀表統計 |

---

## M3.1：疲勞預測模型 PoC（預計 1 週）

| 工作項目 | 說明 | 責任 | 進度 | 備註 |
| --- | --- | --- | --- | --- |
| 歷史數據蒐集 | 整理素材壽命資料 | 資料 | ✅ 完成 | 新增 `fatigue_analyzer` 聚合素材生命週期並提供 API |
| 模型實驗 | 建立疲勞預測 PoC | 資料科學 | ✅ 完成 | 頁面 `38_🛏️_素材疲勞預測.py` 提供風險儀表與建議 |
| 評估報告 | 命中率/誤差分析 | 資料科學 | ✅ 完成 | 新增 `fatigue_reporter.py` 生成摘要與下載 |
| 試點驗證 | 選定素材測試 | CS | ✅ 完成 | `fatigue_pilot_manager` 支援記錄，附 `scripts/seed_fatigue_pilots.py` 示範資料 |

---

## M3.2：更換推播與決策儀表（預計 1 週）

| 工作項目 | 說明 | 責任 | 進度 | 備註 |
| --- | --- | --- | --- | --- |
| 推播策略 | 提前 48h 通知 | 後端 | ✅ 完成 | 新增 `push_scheduler` 推播計畫產生與 ICS 匯出 |
| 儀表介面 | 顯示疲勞預測與建議 | 前端 | ✅ 完成 | 頁面提供疲勞風險儀表與建議訊息審閱 |
| 任務整合 | 直接指派更換任務 | 產品 | ✅ 完成 | 推播 CTA 與紀錄表單支援任務建立 |
| 成效追蹤 | 測試建議採納情況 | 資料 | ✅ 完成 | 串接 `push_history` 統計採納率與歷史紀錄 |

---

## M3.3：預算重分配助手（預計 1 週）

| 工作項目 | 說明 | 責任 | 進度 | 備註 |
| --- | --- | --- | --- | --- |
| 建議算法 | 依素材與活動效益建議 | 資料 | ✅ 完成 | 新增 `budget_optimizer` 產出重分配計畫並覆蓋單元測試 |
| 一鍵套用 | 呼叫 API 調整預算 | 後端 | ✅ 完成 | 頁面 `39_💰_預算重分配助手.py` 提供建議匯出 |
| 風險提示 | 顯示影響與假設 | 前端 | ✅ 完成 | 顯示釋出/追加金額與活動說明 |
| 採納追蹤 | 紀錄採納率與結果 | 資料 | ✅ 完成 | 串接 `usage_store` 紀錄採納事件與分析報表 |

---

## M4.1：多平台轉換規格與 MVP（預計 1 週）

| 工作項目 | 說明 | 責任 | 進度 | 備註 |
| --- | --- | --- | --- | --- |
| 平台規格整理 | Google、LINE、IG Reels | 產品 | ✅ 完成 | `platform_specs` 提供版位與素材規格查詢 |
| 轉換 AI 工作流 | 指令模板 + 轉換 | AI 團隊 | ✅ 完成 | 頁面 `40_🔁_多平台轉換中心.py` 內建 AI 模板 |
| 匯出流程 | ZIP/直接串接 | 後端 | ✅ 完成 | 支援 ZIP 匯出並驗證授權設定 |
| 試點測試 | 選定 1 品牌轉換 | CS | 待開發 | 蒐集回饋 |

---

## M4.2：媒體庫版位管理（預計 1 週）

| 工作項目 | 說明 | 責任 | 進度 | 備註 |
| --- | --- | --- | --- | --- |
| 媒體庫資料結構 | 多平台素材管理 | 後端 | ✅ 完成 | 新增 `media_slot_manager` 串接 `creative_store` 與版位維度 |
| 版位標籤 | 標記規格/使用情境 | 前端 | ✅ 完成 | 頁面 `41_🗃️_媒體庫版位管理.py` 支援批次標籤與篩選 |
| 批量匯出 | 多版位打包 | 後端 | ✅ 完成 | 提供 ZIP 匯出並寫入下載紀錄 |
| 版本控管 | 追蹤更新歷史 | 產品 | ✅ 完成 | 新增 `media_revision_tracker` 與稽核 diff/回滾串接 |

---

## M4.3：CRM 受眾同步 MVP（預計 1 週）

| 工作項目 | 說明 | 責任 | 進度 | 備註 |
| --- | --- | --- | --- | --- |
| 匯入流程 | 支援 CSV/ API | 後端 | ✅ 完成 | `crm_sync_pipeline` 與頁面 `42_🔄_CRM受眾同步.py` 支援批次匯入與同意驗證 |
| 受眾清洗 | 標準化資料 | 資料 | ✅ 完成 | `audience_cleaner` 移除重複並加密識別 |
| 受眾推送 | 同步至廣告平台 | 後端 | ✅ 完成 | Meta/LINE 連接器完成權限驗證與推送紀錄 |
| 旅程建議 | 受眾旅程模板 | 產品 + AI | 待開發 | 與市集關聯 |

---

## 測試狀態

- `pytest` 31 項測試全數通過（涵蓋 `tests/test_content_ingestor.py`、`tests/test_license_notification_service.py`、`tests/test_template_review_scheduler.py`、`tests/test_fatigue_reporter.py` 等核心模組）
- 模板批次匯入、授權提醒、審核排程與疲勞試點流程新增測試夾具，確保回滾、提醒與報告輸出的再現性
- 保留 `openpyxl` 日期格式警示，待後續版本更新或格式化策略調整

---

## M5.1：訂閱/付款流程（預計 1 週）

| 工作項目 | 說明 | 責任 | 進度 | 備註 |
| --- | --- | --- | --- | --- |
| 方案設定 | 定義定價/週期 | 產品 + 財務 | ✅ 完成 | 完成訂閱方案草稿與授權對應矩陣 |
| 串接金流 | Stripe/NewebPay | 後端 | ⏳ 進行中 | 出具金流串接需求清單與風險評估 |
| 帳務通知 | 收款/逾期提醒 | 行銷 | 待開發 | 整合郵件 |
| 發票流程 | 自動開立/匯出 | 財務 | 待開發 | 法規遵循 |

---

## M5.2：用量計費與報表（預計 1 週）

| 工作項目 | 說明 | 責任 | 進度 | 備註 |
| --- | --- | --- | --- | --- |
| 用量紀錄 | API/生成量紀錄 | 後端 | 待開發 | 與 LLM 成本整合 |
| 計費邏輯 | 計算費用 | 財務 + 後端 | 待開發 | 支援折扣 |
| 客戶儀表 | 客製帳單視圖 | 前端 | 待開發 | 匯出 PDF |
| 對帳流程 | 财會核對 | 財務 | 待開發 | 日/週檢查 |

---

## M5.3：推薦與代理後台（預計 1 週）

| 工作項目 | 說明 | 責任 | 進度 | 備註 |
| --- | --- | --- | --- | --- |
| 推薦碼系統 | 產生/追蹤 | 後端 | 待開發 | 權限與分享 |
| 代理商後台 | 管理客戶與佣金 | 前端 + 行銷 | 待開發 | 多層級支援 |
| 佣金結算 | 自動計算/發放 | 財務 | 待開發 | 與帳務串接 |
| 活動工具 | 提供促銷物料 | 行銷 | 待開發 | 與市集連動 |

---

## M6.1：權限與審批流程（預計 1 週）

| 工作項目 | 說明 | 責任 | 進度 | 備註 |
| --- | --- | --- | --- | --- |
| 權限模型 | 角色/權限矩陣 | 產品 | 待開發 | 與 IAM 整合 |
| 審批流程 | 素材/報表審批 | 後端 | 待開發 | 支援多層級 |
| 審批 UI | 審核、註解、DIFF | 前端 | 待開發 | 版本比對 |
| 通知與紀錄 | 審批結果通知 | 後端 | 待開發 | 稽核保存 |

---

## M6.2：稽核報表與 API（預計 1 週）

| 工作項目 | 說明 | 責任 | 進度 | 備註 |
| --- | --- | --- | --- | --- |
| 稽核資料倉儲 | 紀錄操作與產出 | 資料 | 待開發 | 與 logging 整合 |
| 稽核報表 | 給稽核/法務 | 前端 | 待開發 | 匯出 PDF/CSV |
| 公開 API | 素材/成效查詢 | 後端 | 待開發 | 速率限制、金流 |
| API 管理 | 金鑰/權限/監控 | 後端 | 待開發 | 成本控管 |

---

## M6.3：私有部署指南（預計 1 週）

| 工作項目 | 說明 | 責任 | 進度 | 備註 |
| --- | --- | --- | --- | --- |
| 部署腳本 | Docker/K8s | DevOps | 待開發 | 支援雲/本地 |
| 設定文件 | .env/金鑰設定 | DevOps | 待開發 | 安全政策 |
| 健康檢查 | 部署驗證流程 | QA | 待開發 | checklist |
| 售後支援包 | 預設維運流程 | CS + DevOps | 待開發 | SLA 標準 |

---

## 待規劃項目（Backlog）

| 項目 | 說明 | 優先度 | 備註 |
| --- | --- | --- | --- |
| 模型成本優化 | 自動模型選擇與快取策略 | 高 | 與 Phase 3 疲勞預測一起評估 |
| 第三方素材合作 | 導入外部素材供應商 | 中 | 惠及模板市集 |
| 客製 Dashboard | 允許客戶自定小工具 | 中 | Phase 4 後評估 |
| 教育課程內容 | 付費教學、導入營收 | 低 | 搭配推薦計畫推出 |

---

## 更新紀錄

| 日期 | 編輯者 | 摘要 |
| --- | --- | --- |
| 2025-10-08 | Codex（AI 助理） | 建立商業導向功能分階段開發計畫初稿 |
| 2025-10-08 | Codex（AI 助理） | 完成 M1.1 模板資料 Schema、後台上傳介面與基礎版本控管 |
| 2025-10-08 | Codex（AI 助理） | 完成 M1.2 模板市集前台、詳情頁與授權下載流程初版 |
| 2025-10-08 | Codex（AI 助理） | 完成 M1.3 授權方案管理、知識庫套用流程（通知尚待補強） |
| 2025-10-08 | Codex（AI 助理） | 完成 M1.4 審核紀錄、樣板檢查、事件追蹤基礎 |
| 2025-10-08 | Codex（AI 助理） | 完成 M2.1 週報白標輸出服務與頁面（QA 驗證待補） |
| 2025-10-08 | Codex（AI 助理） | 完成 M2.2 排程管理介面與 ics 匯出、月報摘要生成功能 |
| 2025-10-08 | Codex（AI 助理） | 完成 M2.3 ROI 模擬器（CSV 匯出；PDF/PPT 待擴充） |
| 2025-10-09 | Codex（AI 助理） | 完成 M2.1 週報 QA 自動檢查與頁面整合 |
| 2025-10-09 | Codex（AI 助理） | 完成 M2.2 月報深入洞察與 HTML 郵件模板 |
| 2025-10-09 | Codex（AI 助理） | 完成 M2.3 ROI PPT 匯出與使用追蹤紀錄 |
| 2025-10-09 | Codex（AI 助理） | 完成 ROI 使用追蹤儀表與事件統計 |
| 2025-10-09 | Codex（AI 助理） | 完成 M3.1 疲勞預測 PoC 與素材壽命聚合 |
| 2025-10-09 | Codex（AI 助理） | 完成 M3.3 預算重分配助手（建議/採納追蹤） |
| 2025-10-09 | Codex（AI 助理） | 完成 M3.2 推播策略模組與通知匯出 |
| 2025-10-09 | Codex（AI 助理） | 完成 M4.1 多平台轉換中心（規格查詢、AI 模板、ZIP 匯出） |
| 2025-10-09 | Codex（AI 助理） | 新增 Stage 3/4 測試覆蓋並確認 pytest 20 項通過（保留 openpyxl 日期警示） |
| 2025-10-09 | Codex（AI 助理） | 完成 M4.2 媒體庫版位管理（資料結構、標籤、批次匯出、版本控管） |
| 2025-10-09 | Codex（AI 助理） | 完成 M4.3 CRM 受眾同步（匯入、清洗、Meta/LINE 推送連接器） |
| 2025-10-09 | Codex（AI 助理） | 擴充測試覆蓋至媒體庫版本控管與 CRM 推送流程，pytest 28 項通過 |
| 2025-10-09 | Codex（AI 助理） | 啟動 Stage 5 訂閱/金流規劃（方案草稿、金流需求清單） |
| 2025-10-09 | Codex（AI 助理） | 聚焦 Stage 1~3 未完成程式開發，補齊通知、儀表與疲勞試點模組規劃 |
| 2025-10-10 | Codex（AI 助理） | 匯入首批 10 組模板樣本並新增模板回饋表單、成效儀表頁面 |
| 2025-10-10 | Codex（AI 助理） | 完成授權與疲勞試點追蹤腳本（seed_license_pilots、seed_fatigue_pilots），Stage 1~3 功能開發收斂 |
| 2025-10-10 | Codex（AI 助理） | pytest 擴充至 31 項（含內容匯入、授權提醒、審核排程、疲勞報告流程） |
| 2025-10-10 | Codex（AI 助理） | 完成 Stage 1 模板批次匯入、授權提醒與審核排程模組（content_ingestor、license_notification_service、template_review_scheduler） |
| 2025-10-10 | Codex（AI 助理） | 強化 M3 疲勞預測：新增 fatigue_reporter/fatigue_pilot_manager 並更新頁面支援報告下載與試點紀錄 |
| 2025-10-10 | Codex（AI 助理） | pytest 擴充至 31 項，涵蓋內容匯入、授權提醒、審核排程與疲勞報告流程 |
