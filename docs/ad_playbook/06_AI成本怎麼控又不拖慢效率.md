# AI 成本怎麼控，又不拖慢投放效率？

## 痛點情境
生成式 AI 很好用，但每次呼叫模型都在燒錢。投手既要速度，又怕預算爆表；更糟糕的是成本散落看不到總額。

## 我們的解法
1. **快取系統**：重複查詢（例如相同文案需求）直接命中快取，預設開關在 `.env` 控制。
2. **效能與成本儀表板**：追蹤每次 LLM 呼叫的花費、快取命中率、潛在節省。
3. **API Key 輪替與錯誤重試**：避免 key 爆掉或請求失敗導致工作中斷。
4. **模型選擇器 + 個人化偏好**：依任務挑選 fast / balanced / quality，不再用大砲打小鳥。

### 核心流程
1. 開發階段關閉快取，確保每次調整立即生效；正式環境開啟快取節省 40-60% API 費用。
2. 在「效能與成本儀表板」檢查成本走勢、快取命中率，及早發現不必要的調用。
3. 調整模型偏好（`pages/31_⚙️`），新品/大案用品質型模型，日常優化用快速模型。
4. 若遇到 API 限制，API Key Manager 自動切換其他 key，減少手動干預。

### 推薦工具
- `utils/cache_manager.py`、`pages/27_🗄️_快取管理.py`
- `pages/28_📊_效能與成本儀表板.py`
- `utils/api_keys.py`、`utils/error_handler.py`
- `utils/model_selector.py`、`pages/31_⚙️_個人化偏好.py`

### 監控指標
- LLM 月度成本、快取命中率
- 每次建議生成時間（P95）
- 成本節省百分比、模型使用分佈

## 後續可優化
- 補上「成本上限提醒」：接近預算時自動通知投手或暫停高價模型。
- 依任務自動下調模型（例如素材疲乏檢查改用 fast 模型）。
- 將成本與轉換效益做對照，得出「每美元帶來多少額外轉換」。
